image: maven:3.6.1

pipelines:
  default:
    - step:
        name: MAven
        caches:
          - maven
        script:
          - cd project_code/
          - mvn clean
    - step:
        name: maven package
        caches:
          - maven
        script:
          - cd project_code/
          - mvn package 
          - ls target/
    - step:
        name: Artifactory Upload
        caches:
          - maven
        script:
          - cd project_code/
          - pipe: JfrogDev/artifactory-maven:0.3.3
            variables:
              ARTIFACTORY_URL: $url
              ARTIFACTORY_USER: $user
              ARTIFACTORY_PASSWORD: $pass
              MAVEN_SNAPSHOT_REPO: 'target/debitcardcustomer-0.0.1-SNAPSHOT.war'
              MAVEN_RELEASE_REPO: 'dev-debit-bit'
   